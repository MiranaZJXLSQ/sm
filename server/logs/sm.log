{"level":"info","ts":1633676044.082944,"caller":"apputil/container.go:122","msg":"session opened","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676044.083911,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676044.12029,"caller":"smserver/container.go:273","msg":"campaign leader success","node":"/bd/app/foo.bar/leader","lease":7587857689791821817}
{"level":"info","ts":1633676047.0917912,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676047.0919309,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676047.093546,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676047.093639,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676047.103255,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676049.125206,"caller":"smserver/container.go:336","msg":"leader init shard move action","service":"foo.bar","action":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true}}
{"level":"info","ts":1633676049.129011,"caller":"smserver/container.go:238","msg":"register operator success","shardService":"foo.bar2"}
{"level":"info","ts":1633676049.129146,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar2"}
{"level":"info","ts":1633676049.129172,"caller":"smserver/container.go:158","msg":"shard added","id":"s1","spec":{"service":"foo.bar","task":"{\"governedService\":\"foo.bar2\"}","updateTime":1632313023,"containerId":"127.0.0.1:8888"}}
{"level":"info","ts":1633676049.129215,"caller":"apputil/shard.go:372","msg":"add shard request success","request":{"id":"s1","type":1}}
{"level":"info","ts":1633676049.129584,"caller":"smserver/operator.go:320","msg":"send success","urlStr":"http://127.0.0.1:8888/sm/admin/add-shard","action":"add","response":"{}"}
{"level":"info","ts":1633676049.129666,"caller":"smserver/operator.go:265","msg":"move shard request success","ma":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true},"onlyAdd":true,"onlyDrop":false}
{"level":"info","ts":1633676049.131358,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shard/s1","curValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","newValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676049.1316879,"caller":"smserver/operator.go:286","msg":"move shard etcd CompareAndSwap success","key":"/bd/app/foo.bar/shard/s1","cur":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","new":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676049.1501682,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676049.150315,"caller":"smserver/container.go:305","msg":"leader completed op","service":"foo.bar"}
{"level":"info","ts":1633676049.150762,"caller":"smserver/operator.go:134","msg":"empty shard move task","key":"/bd/app/foo.bar/task","service":"foo.bar"}
{"level":"info","ts":1633676050.0954912,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676050.0957062,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676050.104177,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676050.1208398,"caller":"etcdutil/etcdutil.go:133","msg":"create node success","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"]}
{"level":"info","ts":1633676050.120917,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676052.136631,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676052.157055,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676052.15733,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"warn","ts":1633676052.870663,"caller":"smmain/sm.go:78","msg":"Received exit signal","sig":"interrupt"}
{"level":"info","ts":1633676052.87087,"caller":"apputil/container.go:159","msg":"context done","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676052.870919,"caller":"apputil/loop.go:31","msg":"[lw] service foo.bar ShardAllocateLoop exit"}
{"level":"info","ts":1633676052.870979,"caller":"apputil/shard.go:293","msg":"context done","hbNode":"/bd/app/foo.bar/shardhb/127.0.0.1:8888"}
{"level":"info","ts":1633676052.870954,"caller":"apputil/loop.go:51","msg":"[lw] service foo.bar ShardLoadLoop exit"}
{"level":"info","ts":1633676052.871122,"caller":"smserver/server.go:181","msg":"main exit server"}
{"level":"info","ts":1633676052.8711932,"caller":"smmain/sm.go:58","msg":"sm exit","cfg":{"id":"127.0.0.1:8888","service":"foo.bar","addr":":8888","endpoints":["127.0.0.1:2379"],"config-file":""}}
{"level":"info","ts":1633676075.405422,"caller":"apputil/container.go:122","msg":"session opened","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676075.40627,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676075.4425652,"caller":"smserver/container.go:273","msg":"campaign leader success","node":"/bd/app/foo.bar/leader","lease":7587857689791821841}
{"level":"info","ts":1633676078.4091752,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676078.4132612,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676078.413586,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676078.4150422,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676078.4152262,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676080.446671,"caller":"smserver/container.go:336","msg":"leader init shard move action","service":"foo.bar","action":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true}}
{"level":"info","ts":1633676080.44959,"caller":"smserver/container.go:238","msg":"register operator success","shardService":"foo.bar2"}
{"level":"info","ts":1633676080.449739,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar2"}
{"level":"info","ts":1633676080.4497778,"caller":"smserver/container.go:158","msg":"shard added","id":"s1","spec":{"service":"foo.bar","task":"{\"governedService\":\"foo.bar2\"}","updateTime":1632313023,"containerId":"127.0.0.1:8888"}}
{"level":"info","ts":1633676080.4498901,"caller":"apputil/shard.go:372","msg":"add shard request success","request":{"id":"s1","type":1}}
{"level":"info","ts":1633676080.450263,"caller":"smserver/operator.go:320","msg":"send success","urlStr":"http://127.0.0.1:8888/sm/admin/add-shard","action":"add","response":"{}"}
{"level":"info","ts":1633676080.450376,"caller":"smserver/operator.go:265","msg":"move shard request success","ma":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true},"onlyAdd":true,"onlyDrop":false}
{"level":"info","ts":1633676080.45206,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shard/s1","curValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","newValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676080.45262,"caller":"smserver/operator.go:286","msg":"move shard etcd CompareAndSwap success","key":"/bd/app/foo.bar/shard/s1","cur":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","new":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676080.4643042,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676080.469833,"caller":"smserver/container.go:305","msg":"leader completed op","service":"foo.bar"}
{"level":"info","ts":1633676080.470088,"caller":"smserver/operator.go:134","msg":"empty shard move task","key":"/bd/app/foo.bar/task","service":"foo.bar"}
{"level":"info","ts":1633676081.410402,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676081.4127092,"caller":"etcdutil/etcdutil.go:133","msg":"create node success","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"]}
{"level":"info","ts":1633676081.4298189,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676081.504255,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676081.5043561,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676083.45381,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676083.4694111,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676083.4698071,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676084.4089751,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676084.409934,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676084.4118888,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676084.4296808,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676084.447187,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676084.447267,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"warn","ts":1633676085.515052,"caller":"smmain/sm.go:78","msg":"Received exit signal","sig":"interrupt"}
{"level":"info","ts":1633676085.515315,"caller":"apputil/container.go:159","msg":"context done","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676085.515389,"caller":"apputil/loop.go:31","msg":"container stop upload load"}
{"level":"info","ts":1633676085.515436,"caller":"apputil/container.go:175","msg":"container closed","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676085.515473,"caller":"apputil/loop.go:31","msg":"[lw] service foo.bar ShardAllocateLoop exit"}
{"level":"info","ts":1633676085.515506,"caller":"apputil/loop.go:51","msg":"[lw] service foo.bar ContainerLoadLoop exit"}
{"level":"info","ts":1633676085.515581,"caller":"apputil/loop.go:51","msg":"[lw] service foo.bar ShardLoadLoop exit"}
{"level":"info","ts":1633676085.515661,"caller":"smserver/server.go:181","msg":"main exit server"}
{"level":"info","ts":1633676085.515759,"caller":"smmain/sm.go:58","msg":"sm exit","cfg":{"id":"127.0.0.1:8888","service":"foo.bar","addr":":8888","endpoints":["127.0.0.1:2379"],"config-file":""}}
{"level":"info","ts":1633676193.544508,"caller":"apputil/container.go:122","msg":"session opened","id":"127.0.0.1:8888","service":"foo.bar"}
{"level":"info","ts":1633676193.545265,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676193.578908,"caller":"smserver/container.go:273","msg":"campaign leader success","node":"/bd/app/foo.bar/leader","lease":7587857689791821872}
{"level":"info","ts":1633676196.553309,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676196.55365,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676196.554467,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"expect":{}}
{"level":"info","ts":1633676196.554541,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":[],"result":null}
{"level":"info","ts":1633676196.562199,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676198.581446,"caller":"smserver/container.go:336","msg":"leader init shard move action","service":"foo.bar","action":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true}}
{"level":"info","ts":1633676198.5843682,"caller":"smserver/container.go:238","msg":"register operator success","shardService":"foo.bar2"}
{"level":"info","ts":1633676198.584512,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar2"}
{"level":"info","ts":1633676198.584534,"caller":"smserver/container.go:158","msg":"shard added","id":"s1","spec":{"service":"foo.bar","task":"{\"governedService\":\"foo.bar2\"}","updateTime":1632313023,"containerId":"127.0.0.1:8888"}}
{"level":"info","ts":1633676198.584564,"caller":"apputil/shard.go:372","msg":"add shard request success","request":{"id":"s1","type":1}}
{"level":"info","ts":1633676198.584878,"caller":"smserver/operator.go:320","msg":"send success","urlStr":"http://127.0.0.1:8888/sm/admin/add-shard","action":"add","response":"{}"}
{"level":"info","ts":1633676198.5849369,"caller":"smserver/operator.go:265","msg":"move shard request success","ma":{"service":"foo.bar","shardId":"s1","dropEndpoint":"","addEndpoint":"127.0.0.1:8888","allowDrop":true},"onlyAdd":true,"onlyDrop":false}
{"level":"info","ts":1633676198.586762,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shard/s1","curValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","newValue":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676198.6042151,"caller":"smserver/operator.go:286","msg":"move shard etcd CompareAndSwap success","key":"/bd/app/foo.bar/shard/s1","cur":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}","new":"{\"service\":\"foo.bar\",\"task\":\"{\\\"governedService\\\":\\\"foo.bar2\\\"}\",\"updateTime\":1632313023,\"containerId\":\"127.0.0.1:8888\"}"}
{"level":"info","ts":1633676198.604291,"caller":"smserver/mw.go:92","msg":"maintenanceWorker started","service":"foo.bar"}
{"level":"info","ts":1633676198.6043909,"caller":"smserver/container.go:305","msg":"leader completed op","service":"foo.bar"}
{"level":"info","ts":1633676198.604861,"caller":"smserver/operator.go:134","msg":"empty shard move task","key":"/bd/app/foo.bar/task","service":"foo.bar"}
{"level":"info","ts":1633676199.55477,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676199.5549219,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676199.561739,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"info","ts":1633676199.651926,"caller":"etcdutil/etcdutil.go:133","msg":"create node success","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"]}
{"level":"info","ts":1633676199.652042,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676201.589786,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676201.609609,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676201.609728,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676202.554357,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676202.554501,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676202.562068,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676202.6642208,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676202.665719,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676202.665869,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676204.589927,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676204.610621,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676204.610778,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676205.554394,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676205.55457,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676205.561971,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676205.579531,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676205.59797,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676205.598059,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676207.590375,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676207.6106062,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676207.610778,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676208.555254,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676208.555376,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676208.561866,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676208.580467,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676208.6713521,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676208.6714509,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676210.5902689,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676210.609621,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676210.609765,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676211.5508852,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676211.551268,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676211.562668,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676211.574518,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676211.5928268,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676211.592876,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676213.589953,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676213.6083899,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676213.608466,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676214.551487,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676214.551626,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676214.562387,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676214.573278,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676214.591114,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676214.591168,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676216.586764,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676216.611768,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676216.612045,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676217.555339,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676217.5555189,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676217.561451,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676217.579365,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676217.597599,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676217.597664,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676219.591583,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676219.607837,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676219.607939,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676220.549782,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676220.550006,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676220.562755,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676220.576939,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676220.593827,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676220.593893,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676222.59149,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676222.6110919,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676222.6111748,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676223.555247,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676223.555775,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676223.5614378,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676223.581419,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676223.5993059,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676223.5994282,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676225.5913029,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676225.609309,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676225.6094909,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676226.553417,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676226.553524,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676226.562743,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676226.576363,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676226.594742,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676226.627869,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
{"level":"info","ts":1633676228.589228,"caller":"smserver/mw.go:111","msg":"service not init yet","service":"foo.bar2"}
{"level":"info","ts":1633676228.607884,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676228.6080372,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676229.555938,"caller":"smserver/mw.go:211","msg":"perform assignment start","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"expect":{"127.0.0.1:8888":["s1"]}}
{"level":"info","ts":1633676229.55617,"caller":"smserver/mw.go:244","msg":"perform assignment complete","service":"foo.bar","shardIds":["s1"],"surviveContainerIds":["127.0.0.1:8888"],"result":null}
{"level":"info","ts":1633676229.561596,"caller":"smserver/container.go:220","msg":"get shards success","service":"foo.bar"}
{"level":"error","ts":1633676229.583285,"caller":"etcdutil/etcdutil.go:140","msg":"failed to create node (already exist)","nodes":["/bd/app/foo.bar/shardhb/127.0.0.1:8888"],"values":["s1"],"stacktrace":"github.com/entertainment-venue/sm/pkg/etcdutil.(*EtcdClient).CreateAndGet\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/etcdutil/etcdutil.go:140\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1.1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:209\ngithub.com/entertainment-venue/sm/pkg/apputil.TickerLoop\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/loop.go:34\ngithub.com/entertainment-venue/sm/pkg/apputil.NewShardServer.func1\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/shard.go:199\ngithub.com/entertainment-venue/sm/pkg/apputil.(*GoroutineStopper).Wrap.func2\n\t/Users/sftc/gpm/gopath/src/github.com/entertainment-venue/sm/server/vendor/github.com/entertainment-venue/sm/pkg/apputil/stopper.go:47"}
{"level":"info","ts":1633676229.6027908,"caller":"etcdutil/etcdutil.go:170","msg":"swap node success","node":"/bd/app/foo.bar/shardhb/127.0.0.1:8888","curValue":"s1","newValue":"s1"}
{"level":"info","ts":1633676229.6029131,"caller":"smserver/container.go:205","msg":"get load success","id":"s1","load":"todo"}
